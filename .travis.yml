language: python
python:
- '2.6'
- '2.7'
- '3.3'
- pypy
env:
- FLASK=0.10.1
- FLASK=0.10
- FLASK=0.9
matrix:
  allow_failures:
  - python: '3.3'
    env: FLASK=0.9
install:
- pip install pep8 coveralls six
- pip install -U "pip>=1.4" "setuptools>=0.9" "wheel>=0.21"
- pip install flask==$FLASK
script:
- coverage erase
- nosetests --with-coverage --cover-package=flask_cors
- python setup.py clean build install
after_success:
- pep8 flask_cors.py
- coveralls
deploy:
  provider: pypi
  user: CoryDolphin
  password:
    secure: YaYiBkI4mgSvhZ9WV5DPtOglBZwdm69JKEo6ZwjNp7h3tTa8tu8rSmMB/5L7opUj3A8LxU3f/Shct1irqkRcu3dw4M83zVBVhp1PRxo4pEhHwpshUq2dat0CCqrh96QexevdAQzSFVkNlMP3ghOfLGr4fku7WC931BCBtxWCns8=
  on:
    tags: true
    repo: CoryDolphin/flask-cors
    condition: $TRAVIS_PYTHON_VERSION != *2.6* # Ensures we release a 2.7X wheel
